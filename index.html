<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="style/style.css" />
		<link
			href="https://fonts.cdnfonts.com/css/twentieth-century-for-kenmore"
			rel="stylesheet"
		/>
		<title>Grid</title>
	</head>
	<body>
		<div class="container">
			<section class="container-section">
				<h2 class="container-section__title">nouveautés</h2>
				<div class="container-section__description">
					Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla vel
					velit id sapien.
				</div>
				<a href="" class="container-section__link">
					<p class="container-section__link__title">Voir tout</p>
				</a>
				<div class="container-section__carousel carousel" id="slider">
					<div class="carousel__product">
						<div class="carousel__product__container-image">
							<img
								src="./produit.png"
								alt=""
								class="carousel__product__container-image__image"
							/>
						</div>
						<p class="carousel__product__title">Philipponat</p>
						<p class="carousel__product__description">
							Royal Réserve Non Dosé | Champagne
						</p>
						<p class="carousel__product__link">Nouveauté</p>
					</div>
					<div class="carousel__product">
						<div class="carousel__product__container-image">
							<img
								src="./produit.png"
								alt=""
								class="carousel__product__container-image__image"
							/>
						</div>
						<p class="carousel__product__title">Philipponat2</p>
						<p class="carousel__product__description">
							Royal Réserve Non Dosé | Champagne
						</p>
						<p class="carousel__product__link">Exclusivité</p>
					</div>
					<div class="carousel__product">
						<div class="carousel__product__container-image">
							<img
								src="./produit.png"
								alt=""
								class="carousel__product__container-image__image"
							/>
						</div>
						<p class="carousel__product__title">Philipponat3</p>
						<p class="carousel__product__description">
							Royal Réserve Non Dosé | Champagne
						</p>
						<p class="carousel__product__link">Quantité limitée</p>
					</div>
					<div class="carousel__product">
						<div class="carousel__product__container-image">
							<img
								src="./produit.png"
								alt=""
								class="carousel__product__container-image__image"
							/>
						</div>
						<p class="carousel__product__title">Philipponat4</p>
						<p class="carousel__product__description">
							Royal Réserve Non Dosé | Champagne
						</p>
						<p class="carousel__product__link">Nouveauté</p>
					</div>
					<div class="carousel__product">
						<div class="carousel__product__container-image">
							<img
								src="./produit.png"
								alt=""
								class="carousel__product__container-image__image"
							/>
						</div>
						<p class="carousel__product__title">Philipponat5</p>
						<p class="carousel__product__description">
							Royal Réserve Non Dosé | Champagne
						</p>
						<p class="carousel__product__link">Nouveauté</p>
					</div>
					<div class="carousel__product">
						<div class="carousel__product__container-image">
							<img
								src="./produit.png"
								alt=""
								class="carousel__product__container-image__image"
							/>
						</div>
						<p class="carousel__product__title">Philipponat6</p>
						<p class="carousel__product__description">
							Royal Réserve Non Dosé | Champagne
						</p>
						<p class="carousel__product__link">Nouveauté</p>
					</div>
					<div class="carousel__product">
						<div class="carousel__product__container-image">
							<img
								src="./produit.png"
								alt=""
								class="carousel__product__container-image__image"
							/>
						</div>
						<p class="carousel__product__title">Philipponat7</p>
						<p class="carousel__product__description">
							Royal Réserve Non Dosé | Champagne
						</p>
						<p class="carousel__product__link">Nouveauté</p>
					</div>
					<button id="slider__prev">
						<svg
							width="9"
							height="16"
							viewBox="0 0 9 16"
							fill="none"
							xmlns="http://www.w3.org/2000/svg"
						>
							<path
								fill-rule="evenodd"
								clip-rule="evenodd"
								d="M0.635237 1.28448L7.31865 7.99973L0.633236 14.7112C0.453144 14.8978 0.454144 15.1838 0.645242 15.3629C0.840341 15.5457 1.1575 15.5457 1.3526 15.3629C1.3566 15.3591 8.36818 8.31945 8.36818 8.31945C8.54427 8.13756 8.54427 7.86096 8.36618 7.68093L1.36461 0.64783C1.1575 0.452805 0.840341 0.452804 0.645242 0.63564C0.454144 0.814726 0.453144 1.1007 0.635237 1.28448Z"
								fill="black"
							/>
						</svg>
					</button>
					<button id="slider__next">
						<svg
							width="9"
							height="16"
							viewBox="0 0 9 16"
							fill="none"
							xmlns="http://www.w3.org/2000/svg"
						>
							<path
								fill-rule="evenodd"
								clip-rule="evenodd"
								d="M0.635237 1.28448L7.31865 7.99973L0.633236 14.7112C0.453144 14.8978 0.454144 15.1838 0.645242 15.3629C0.840341 15.5457 1.1575 15.5457 1.3526 15.3629C1.3566 15.3591 8.36818 8.31945 8.36818 8.31945C8.54427 8.13756 8.54427 7.86096 8.36618 7.68093L1.36461 0.64783C1.1575 0.452805 0.840341 0.452804 0.645242 0.63564C0.454144 0.814726 0.453144 1.1007 0.635237 1.28448Z"
								fill="black"
							/>
						</svg>
					</button>
				</div>
			</section>
		</div>

		<script>

            // number of visible elements into the DOM in function of the screen size (viewport)
            const mediumScreen = 3;
            const largeScreen = 4;

            // control media queries from the viewport
			const screen = {
				small: null,
				medium: window.matchMedia("(min-width : 1151px)"),
				large: window.matchMedia("(min-width : 1424px)"),
			};

			// media query change events
			for (let [scr, mq] of Object.entries(screen)) {
				if (mq) mq.addEventListener("change", mqHandler);
			}

			function mqHandler() {
				let size = null;
				for (let [scr, mq] of Object.entries(screen)) {
					if (!mq || mq.matches) size = scr;
				}
                arrowVisibility(size)
			}
            
            // hide or show Arrow into the DOM
            function arrowVisibility(screenSize){
				let arrowPrevious = document.querySelector("#slider__prev");
				let arrowNext = document.querySelector("#slider__next");

				if (screenSize === "small") {
					arrowPrevious.style.display = "none";
					arrowNext.style.display = "none";
				} else {
					let products = document.querySelectorAll(
						"#slider .carousel__product"
					);

					let order = 0;
					products = new Array([...products])[0];

					function showButton() {
						order === 0
							? (arrowPrevious.style.display = "none")
							: (arrowPrevious.style.display = "block");

						if (screenSize === "medium") {
							order !== 0 && order === products.length - mediumScreen
								? (arrowNext.style.display = "none")
								: (arrowNext.style.display = "block");
						} else if (screenSize === "large") {
							order !== 0 && order === products.length - largeScreen
								? (arrowNext.style.display = "none")
								: (arrowNext.style.display = "block");
						}
					}

					showButton();

					arrowPrevious.addEventListener("click", function () {
						order--;
						products[products.length - 1].style.order = 0;
						products = [products[products.length - 1], ...products];
						products.pop();
						showButton();
					});

					arrowNext.addEventListener("click", function () {
						order++;
						products[0].style.order = order;
						products.push(products[0]);
						products.shift();
						showButton();
					});
				}
            }

			mqHandler();
		</script>
	</body>
</html>
